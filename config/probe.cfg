[probe]
pin: EBBCan:PB6
deactivate_on_each_sample: False
z_offset: 14.8

[z_tilt]
speed: 200
horizontal_move_z: 20
retries: 3
retry_tolerance: 0.0075
z_positions:
  320, 340  
  150, -40 
  -20, 340 
points:
  280, 300  
  150, 50
  30, 300

[bed_mesh]
speed: 200
horizontal_move_z: 20
mesh_min: 30, 60
mesh_max: 280, 300
probe_count: 4,4

[gcode_macro Z_TILT_ADJUST]
rename_existing: _Z_TILT_ADJUST
gcode:
  PICKUP_KLICKY
  _Z_TILT_ADJUST
  DOCK_KLICKY

[gcode_macro BED_MESH_CALIBRATE]
rename_existing: _BED_MESH_CALIBRATE
gcode:
  PICKUP_KLICKY
  _BED_MESH_CALIBRATE
  DOCK_KLICKY

[gcode_macro PICKUP_KLICKY]
description: Pickup the Klicky probe
gcode:
  SAVE_GCODE_STATE
  G90
  G1 Z40
  G1 X302 Y50 F8000
  G1 Y0 F4000
  SET_LED LED=bedfront RED=0 GREEN=0 BLUE=1
  G1 Y50
  RESTORE_GCODE_STATE

[gcode_macro DOCK_KLICKY]
description: Return the Klicky probe
gcode:
  SAVE_GCODE_STATE
  G90
  G1 Z40
  G1 Y50 F8000
  G1 X302 F8000
  G1 Y0 F4000
  G91
  G1 X-40
  SET_LED LED=bedfront RED=0.8 GREEN=0 BLUE=1
  RESTORE_GCODE_STATE